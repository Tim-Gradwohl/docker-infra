name: iptvnator
services:
  iptvnator:
    image: 4gray/iptvnator:latest
    container_name: iptvnator
    restart: unless-stopped

    env_file:
      - ../../shared/.env.global

    networks:
      - proxy
    labels:
      - traefik.enable=true
      - traefik.docker.network=proxy
      # LAN-only host routing using global variable
      - traefik.http.routers.iptvnator.rule=Host(`iptv.${LAN_DOMAIN}`)
      - traefik.http.routers.iptvnator.entrypoints=web
      - traefik.http.services.iptvnator.loadbalancer.server.port=80

    volumes:
      # Persist IPTVnator app data/settings
      - iptvnator_data:/app/data

volumes:
  iptvnator_data:

networks:
  proxy:
    external: true

